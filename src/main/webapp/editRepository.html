<lift:surround with="default" at="content">
<section class="mainContent left">
	<div class="lift:Repository.button">
		<button id="createrepo">create repository</button>
    <input id="commitlabel" value="" type="text"></input>
		<button id="commitrepo">commit repository</button>
          <input type="submit" value="Submit">
		<button id="testbutton">test button</button>
    <h1>Drag files onto this page</h1>

    <input id="fileupload" type="file" name="files[]"  multiple>
		<br></br>
		<div>
		<table>
				<tr>					
					<td>Filename</td>
					<td>delete?</td>
				</tr>
			  <tr id="listfiles">
					<td><span id="filename"></span></td>
					<td><button id="deletefile">delete</button></td>
			  </tr>
		</table>
		</div>

		<br></br>
		<div>
		<table>
				<tr>					
					<td>Commits</td>
					<td>reset?</td>
				</tr>
			  <tr id="listcommits">
					<td><span id="commitname"></span></td>
					<td><button id="resetcommit">reset</button></td>
			  </tr>
		</table>
		</div>
    <div id="progress" style="width:20em; border: 1pt solid silver; display: none">
      <div id="progress-bar" style="background: green; height: 1em; width:0%"></div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    </script>
    <script src="/js/vendor/jquery.ui.widget.js"></script>
    <script src="/js/jquery.iframe-transport.js"></script>
    <script src="/js/jquery.fileupload.js"></script>

    <script>
      $(function () {
        $('#fileupload').fileupload({
          dataType: 'json',
          add: function (e,data) {
            $('#progress-bar').css('width', '0%');
            $('#progress').show();
            data.submit();
          },
          progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10) + '%';
            $('#progress-bar').css('width', progress);
          },
          done: function (e, data) {
            $.each(data.files, function (index, file) {
              $('<p/>').text(file.name).appendTo(document.body);
            });
            $('#progress').fadeOut();
          }
        });
      });
    </script>
	</div>
</section>
</lift:surround>
