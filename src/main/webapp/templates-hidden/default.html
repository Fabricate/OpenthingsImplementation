<html xmlns="http://www.w3.org/1999/xhtml" xmlns:lift="http://liftweb.net/">
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Openthings is a platform where people can design together and stimulate collaboration to make great projects happen." />
    <meta name="keywords" content="open-design, design, version control, makers, maker movement, fablabs" />
		<meta property="og:image" content="http://fabacademy.org/archives/2014/students/risseeuw.martin/images/tutorial/sanding.jpg"/>
		<meta name="google-site-verification" content="ssLMRV87w4QeVJv81fimAPN44n45kz44q1-iQ4Cmz6U" />
		
		<link rel="author" href="https://plus.google.com/+MartinRisseeuw"/>
		
    <title data-lift="Menu.title">Openthings |</title>

    <link rel="icon" href="/public/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="/public/stylesheets/main.css" />
    <link rel="stylesheet" type="text/css" href="/public/stylesheets/jquery.tagsinput.css" />

	<!-- styles for the wysiwyg editor -->
    <link rel="stylesheet" type="text/css" href="/public/markitup/skins/markitup/style.css" />
    <link rel="stylesheet" type="text/css" href="/public/markitup/sets/default/style.css" />
		<link rel="icon" 
      type="image/png" 
      href="/public/images/favicon.png">

    <lift:with-resource-id>
        <script id="jquery" src="/js/jquery-2.1.3.js"></script>
        <script src="/public/markitup/jquery.markitup.js"></script>
        <script src="/public/js/jquery.magnific-popup.min.js"></script>
				<!-- the wysiwyg editor -->
					<script type="text/javascript" src="/public/markitup/sets/default/set.js"></script>
				<!-- <script id="json" src="/classpath/json.js" type="text/javascript"></script> -->
    </lift:with-resource-id>

    <style type="text/css">
			/* <![CDATA[ */
			.edit_error_class {
				display: block;
				color: red;
			}
			/* ]]> */
  	</style>
  </head>
  <body data-lift="Login.account" id="onlinestatus" itemscope itemtype="http://schema.org/WebPage">
		<section class="mainHeader">
			<span data-lift="embed?what=modules/_navigation">Navigation</span>
<!--			<span data-lift="embed?what=modules/_search">Search</span>-->
<!--		<span data-lift="embed?what=modules/_advancedsearch">Advanced search</span>-->
		</section>
		<div data-lift="Msgs?showAll=true" class="alertmessages"></div>

		<span data-lift="embed?what=modules/_addproject">AddProject</span>
		<span data-lift="embed?what=modules/_login">Login</span>
		<span data-lift="embed?what=modules/_logout">Logout</span>
		<span data-lift="embed?what=modules/_account">Account</span>
		<span data-lift="embed?what=modules/_editproject">Edit project</span>

		<div data-lift="Login.account"><span id="onlinestatus" class="#"></span></div>

    <div id="content">The main content will get bound here</div>
		


		<div class="column span-12 last loader left">
			<h1 class="alt"><img alt="" id="ajax-loader" style="display:none;" src="/public/images/ajax-loader.gif"></h1>
		</div>
		<span data-lift="embed?what=modules/_footernav">FooterNav</span>

<!--		<span data-lift="Menu.builder"></span>-->


		<script>
			jQuery(document).ready(function() {
				// add the wysiwyg via markitup
				$('.wysiwyg').markItUp(myTextileSettings);
			});

			function ShowComments(){
				$(".projectComments ul").slideToggle();
				$(".viewcomments").addClass( "commentsopen" );
			}
			function openComments(){
				$(".projectComments ul").slideDown();
				$(".viewcomments").addClass( "commentsopen" );
				$('html, body').animate({
				    scrollTop: $("#comments li:last").offset().top
				}, 500);
			}
			function AddProject(){
				$(".postProject").fadeIn();
				$(".close-icon").click(function(){
					$(".postProject").fadeOut();
				});
			}
			function EditProject(){
				$(".editProject").fadeIn();
				$(".close-icon").click(function(){
					$(".editProject").fadeOut();
				});
			}
			function LoginScreen(){
				$(".loginScreen").fadeIn();
				$(".close-icon").click(function(){
					$(".loginScreen").fadeOut();
				});
			}
			function LogoutScreen(){
				$(".logoutScreen").fadeIn();
				$(".close-icon").click(function(){
					$(".logoutScreen").fadeOut();
				});
			}
			function AccountScreen(){
				$(".accountScreen").fadeIn();
				$(".close-icon").click(function(){
					$(".accountScreen").fadeOut();
				});
			}
			function AddMaterial(){
				$(".addMaterial").slideToggle();
			}
			
			$('.editMenu ul li a').click(function(){
				$(".editMenu").toggleClass("activeMenu");	
				$(".projectNavBtn").toggleClass("projectNavBtnActive");
				$('.projectNavBtn').html("<span class='icon-pencil'></span> Project menu");
			});

			$(".projectNavBtn").click(function() {
					$(".editMenu").toggleClass("activeMenu");	
					$(".projectNavBtn").toggleClass("projectNavBtnActive");	
					var $this = $(this);
					$this.toggleClass("editOn");
					if ($this.hasClass("editOn")) {
							$this.html("Close menu");
					} else {
							$this.html("Project menu");
					}
			});
			
			$('.onoffswitch-label').click(function(){
					$(this).parent().toggleClass('onoffswitch-checked');
					if ($(".onoffswitch").hasClass("onoffswitch-checked")) {
						$(".editPage").fadeIn("fast");
					}
					else{
						$(".editPage").fadeOut("fast");
					}
			});

			function AdvancedSearch(){
				$(".advancedSearch").slideToggle();
				$(".close-icon").click(function(){
					$(".accountScreen").fadeOut();
				});
			}

			function AddTutorial(){
				$(".addTutorial").slideToggle();
				$('html, body').animate({
				    scrollTop: $(".addTutorial").offset().top
				}, 500);
			}

			//Scroll down to projects
			function GoToProjects(){
				$('html, body').animate({
					scrollTop: $(".mainContent").offset().top
				}, 500); 
			}

			function ViewDetails(){
				$(".versionDetails").slideToggle();
			}

			//Project rating
			$('.rating1').hover(function() {
				$('.rating').toggleClass('rated1'); // add class when mouseover happen
			});		
			$('.rating2').hover(function() {
				$('.rating').toggleClass('rated2'); // add class when mouseover happen
			});	
			$('.rating3').hover(function() {
				$('.rating').toggleClass('rated3'); // add class when mouseover happen
			});	
			$('.rating4').hover(function() {
				$('.rating').toggleClass('rated4'); // add class when mouseover happen
			});
			$('.rating5').hover(function() {
				$('.rating').toggleClass('rated5'); // add class when mouseover happen
			});
			$(".rating1").click(function(){
				$(".rating").addClass("isRated1");
				$(".rating").removeClass("isRated2 isRated3 isRated4 isRated5");
			});
			$(".rating2").click(function(){
				$(".rating").addClass("isRated2");
				$(".rating").removeClass("isRated3 isRated4 isRated5");
			});
			$(".rating3").click(function(){
				$(".rating").addClass("isRated3");
				$(".rating").removeClass("isRated4 isRated5");
			});
			$(".rating4").click(function(){
				$(".rating").addClass("isRated4");
				$(".rating").removeClass("isRated5");
			});
			$(".rating5").click(function(){
				$(".rating").addClass("isRated5");
			});


			// Remove elements when user is not loggedIn.
			$(".languageSelect, .notLoggedIn .commentInput, .notLoggedIn #newrating, .notLoggedIn .editMenu,.notLoggedIn .projectNavBtn, .notLoggedIn .editProjectBtn, .notLoggedIn .editMenuHorizontal").remove();

			// Check if there are comments available
			if( $('.comment').length){
			}
			else{
				$(".viewcomments").remove();
			}
			
			// Mobile menu functions
			$('.openMenu p').click(function(){
				var $openmenu = $('.openMenu');
				var $openContent = $('.openMenu p');
				
				$('.mainNavigation ul').slideToggle();
				$openmenu.toggleClass("activeMenu");
				if ($openmenu.hasClass("activeMenu")) {
						$openContent.html('<span class="icon-delete"></span> Close menu');
				} else {
						$openContent.html('<span class="icon-down"></span> Open menu');
				}
				
			});
			
			// Add active class to menu, doesnt work without ajax.
			$('.mainNavigation li a').click(function(){
					$('.mainNavigation li a').removeClass("active");
					$(this).addClass("active");
			});
			
			// Measure margin of the main container according the menu height
			
			
			function menuHeight(){
				var menuHeight = $('.editMenuHorizontal').height() + $('.mainNavigation').height();
				var mainMenuHeight = $('.mainNavigation').height();
				$('#main').css({'margin-top' : menuHeight + 'px'});
				$('.editMenuHorizontal').css({'top' : mainMenuHeight + 'px'});
			}
		
			$('.mainfest-point').click(function(){
				$(this).find('p').slideToggle();
				$(this).find('p').toggleClass('openacc');
				
				var $openacc = $('.mainfest-point p');
				
				if ($openacc.hasClass("openacc")) {
						(this).slideUp;
				} else {
						
				}
				
			});
			

			$(window).resize(function() {
				menuHeight();
			});
			$(document).ready(function() {
				menuHeight();
				
				
				//Count amount of comments
				var n = $( ".comment" ).size();
				$('.viewcomments i').prepend(n + " "); 
				
				// Scroll to an element
				$('a').click(function() {
					var menuHeight = $('.editMenuHorizontal').height() + $('.mainNavigation').height();
					var elementClicked = $(this).attr("href");
					var destination = $(elementClicked).offset().top;
					$("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination - menuHeight}, 500 );
					return false;
				});
			});

			// Pop-ups such as vimeo
			$('.popup-youtube, .popup-vimeo, .popup-gmaps').magnificPopup({
				type: 'iframe',
				mainClass: 'mfp-fade',
				showCloseBtn: true,
				closeBtnInside:true,
				removalDelay: 160,
				preloader: false,
				fixedContentPos: false,

				markup: '<div class="mfp-iframe-scaler">'+
									'<div class="mfp-close"></div>'+
									'<iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe>'+
								'</div>'
			});
		</script>
		<script>
			// Google Analytics
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
					(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
							m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-61173517-1', 'auto');
			ga('send', 'pageview');
			ga('set', 'anonymizeIp', true);
		</script>

  </body>
</html>
